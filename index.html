<!DOCTYPE html>
<html lang ="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div><label>Nome:</label><input type="text" id="nome"></div>
	<div><label>Sobrenome:</label><input type="text" id="sobrenome"></div>
	<div><label>Telefone:</label><input type="text" id="telefone"></div>
	<div><label>RA:</label><input type="text" id="ra"></div>
	<div>
		<button id= "btnSalvar" onclick="Cadastrar()">Cadastrar</button>

		<button id ="btnCancelar">Limpar</button>

	</div>

	<table border="1">
		<thead>
		<tr>
			<td>Nome</td>
			<td>Sobrenome</td>
			<td>Telefone</td>
			<td>RA</td>
			<td>Opções</td>
		</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
	<script type="text/javascript">
		var tbody = document.querySelector('table tbody');
		tbody.innerHTML = '';

		function Cadastrar(){
			var _nome = document.querySelector('#nome').value;
			var _sobrenome = document.querySelector('#sobrenome').value;
			var _telefone = document.querySelector('#telefone').value;
			var _ra = document.querySelector('#ra').value;

			var aluno = {
				Nome: _nome,
				Sobrenome: _sobrenome,
				Telefone: _telefone,
				Ra: _ra
			}

			carregaEstudantes('POST', 0, aluno);
;A
		}

		function carregaEstudantes(metodo, Id, corpo){
			tbody.innerHTML = '';

			var xhr = new XMLHttpRequest();

			if (Id === undefined || Id === 0)
				Id = '';

			xhr.open(metodo, `http://localhost:60612/api/Aluno/${Id}`, true);

			xhr.onload = function(){
			var estudantes  = JSON.parse(this.responseText);
			for(var indice in estudantes){
				adicionaLinha(estudantes[indice]);
				}
			}

			if (corpo !== undefined)
			{	
				xhr.setRequestHeader('content-type', 'application/json');
				xhr.send(JSON.stringify(corpo));
			}
			else
			{
				xhr.send();
			}

		}
	

		carregaEstudantes('GET');

		function editarEstudante(Id){
			var btnSalvar = document.querySelector('# btnSalvar');
			var btnCancelar = document.querySelector('#btnCancelar');
			console.log(Id)
		}


		function adicionaLinha(estudante){
			

			var trow =`<tr>
							<td>${estudante.Nome}</td>	
							<td>${estudante.Sobrenome}</td>
							<td>${estudante.Telefone}</td>
							<td>${estudante.Ra}</td>
							<td><button onclick= 'editarEstudante(${estudante.Id})'>Editar</button></td>

						</tr>
						`
						tbody.innerHTML += trow;
							
		}
	</script>
</body>
</html>